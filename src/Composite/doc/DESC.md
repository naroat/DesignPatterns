# 组合模式

## 定义

组合模式（Composite）：将对象组合成树形结构以表示“部分-整体”的层次结构。组合模式使得用户对单个对象和组合对象的使用具有一致性。当你发现需求中是体现部分与整体层次的结构时，以及你希望用户可以忽略组合对象与单个对象的不同，统一的使用组合结构中的所有对象时，就应该考虑用组合模式了。

## 包含角色

组合部件（Component）：它是一个抽象角色，为要组合的对象提供统一的接口

叶子（Leaf）：在组合中表示子节点对象，叶子节点不能有子节点

合成部件（Composite）：定义有枝节点的行为，用来存储部件，实现在Component接口中的有关操作，如增加（Add）和删除（Remove）

## 使用场景

1）表达对象的部分-整体的层次结构时

2）希望用户忽略组合对象与单个对象的不同，用户将统一地使用组合结构中的所有对象时

## 优缺点

优点：

1）组合模式使得客户端代码可以一致地处理对象和对象容器，无需关系处理的单个对象，还是组合的对象容器

2）将”客户代码与复杂的对象容器结构“解耦

3）可以更容易地往组合对象中加入新的构件。

缺点：

使得设计更加复杂。客户端需要花更多时间理清类之间的层次关系。

## 参考

> https://www.cnblogs.com/woods1815/p/12822057.html
> https://designpatternsphp.readthedocs.io/zh_CN/latest/Structural/Composite/README.html
> https://www.ziruchu.com/art/89